{% extends "admin/base.html" %} 
{% load i18n static %} 
{% block title %} {{ title }} {% endblock %}
{% block content %} 

<!-- Statistics Cards --> 
<div class="row mb-4"> 
    <div class="col-md-3"> 
        <div class="card card-custom"> 
            <div class="card-body"> 
                <div class="stats-number">{{ total_messages }}</div> 
                <p class="card-text">Messages reçus</p> 
                <i class="fas fa-envelope fa-2x text-muted"></i> 
            </div> 
        </div> 
    </div> 
    
    <div class="col-md-3"> 
        <div class="card card-custom"> 
            <div class="card-body"> 
                <div class="stats-number">{{ total_articles }}</div> 
                <p class="card-text">Blog</p> 
                <i class="fas fa-blog fa-2x text-muted"></i> 
            </div> 
        </div> 
    </div> 
    
    <div class="col-md-3"> 
        <div class="card card-custom"> 
            <div class="card-body"> 
                <div class="stats-number">{{ unread_messages }}</div> 
                <p class="card-text">Non lus</p> 
                <i class="fas fa-eye-slash fa-2x text-muted"></i> 
            </div> 
        </div> 
    </div> 
</div> 

<!-- Applications Django par défaut --> 
<div class="row"> 
    {% for app in app_list %} 
    <div class="col-md-6 mb-4"> 
        <div class="card"> 
            <div class="card-header bg-success text-white"> 
                <h5 class="mb-0"> 
                    <i class="fas fa-folder"></i> {{ app.name }} 
                </h5> 
            </div> 
            <div class="card-body"> 
                <div class="list-group"> 
                    {% for model in app.models %} 
                    <a href="{{ model.admin_url }}" class="list-group-item list-group-item-action"> 
                        <i class="fas fa-file"></i> {{ model.name }} 
                        <span class="badge bg-primary rounded-pill float-end">{{ model.count }}</span> 
                    </a> 
                    {% endfor %} 
                </div> 
            </div> 
        </div> 
    </div> 
    {% endfor %} 
</div> 

<!-- Derniers messages --> 
<div class="row mt-4"> 
    <div class="col-12"> 
        <div class="card"> 
            <div class="card-header bg-success text-light d-flex justify-content-between align-items-center"> 
                <h5 class="mb-0"> 
                    <i class="fas fa-clock"></i> Derniers messages 
                </h5> 
                <a href="{% url 'admin:messages_list' %}" class="btn btn-sm btn-light text-dark">
                    <i class="fas fa-list me-1"></i> Voir tout
                </a>
            </div> 
            <div class="card-body"> 
                {% if recent_contacts %} 
                <div class="table-responsive"> 
                    <table class="table table-striped"> 
                        <thead> 
                            <tr class="text-center"> 
                                <th>Nom & Prénom</th> 
                                <th>Email</th> 
                                <th>Message</th> 
                                <th>Date</th>
                                <th>Actins</th>
                            </tr> 
                        </thead> 
                        <tbody> 
                            {% for contact in recent_contacts %} 
                            <tr class="text-center"> 
                                <td><strong>{{ contact.firstName }} {{ contact.lastName }}</strong></td> 
                                <td>{{ contact.email }}</td> 
                                <td>{{ contact.message|truncatewords:5 }}</td> 
                                <td>{{ contact.created_at|date:"H:i d/m/Y" }}</td>
                                <td>
                                    <a href="{% url 'message_read' contact.pk %}" class="btn btn-success btn-sm me-2" title="Détails">
                                        <i class="fas fa-eye"></i>
                                    </a>
                                    <a href="{% url 'admin:message_delete' contact.pk %}" class="btn btn-danger btn-sm me-2" title="Supprimer">
                                        <i class="fas fa-xmark"></i>
                                    </a>
                                    
                                </td>
                            </tr> 
                            {% endfor %} 
                        </tbody> 
                    </table> 
                </div> 
                {% else %} 
                <p class="text-muted">Aucun message récent.</p> 
                {% endif %} 
            </div> 
        </div> 
    </div> 
</div> 
<!-- Derniers article --> 
<div class="row mt-4"> 
    <div class="col-12"> 
        <div class="card"> 
            <div class="card-header bg-success text-light"> 
                <h5 class="mb-0"> 
                    <i class="fas fa-clock"></i> Derniers Articles 
                </h5> 
            </div> 
            <div class="card-body"> 
                {% if recent_articles %} 
                <div class="table-responsive"> 
                    <table class="table table-striped"> 
                        <thead> 
                            <tr class="text-center"> 
                                <th>Titre</th> 
                                <th>Contenu</th> 
                                <th>Publié le</th> 
                                <th>Actions</th> 
                            </tr> 
                        </thead> 
                        <tbody> 
                            {% for article in recent_articles %} 
                            <tr class="text-center"> 
                                <td><a class="btn-outline-success text-decoration-none w-100" href="#">{{ article.title }}</a></td> 
                                <td>{{ article.content|truncatechars:60 }}</td> 
                                <td>{{ article.created_at|date:"d/m/Y" }}</td> 
                                <td>
                                    <a href="{% url 'detail_article' article.pk %}" class="btn btn-success btn-sm" title="Détails">
                                        <i class="fas fa-eye"></i>
                                    </a>
                                    <a href="{% url 'admin:aricle_delete' article.pk %}" class="btn btn-danger btn-sm" title="Supprimer">
                                        <i class="fas fa-xmark"></i>
                                    </a>
                                </td>
                            </tr> 
                            {% endfor %} 
                        </tbody> 
                    </table> 
                </div> 
                {% else %} 
                <p class="text-muted">Aucun Article récent.</p> 
                {% endif %} 
            </div> 
        </div> 
    </div> 
</div> 

{% endblock %}